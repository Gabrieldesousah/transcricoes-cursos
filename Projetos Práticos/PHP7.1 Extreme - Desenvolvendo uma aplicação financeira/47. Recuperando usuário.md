# Recuperando usuário

Agora que já testamos o login e confirmamos que está funcionando corretamente, precisamos mostrar o nome do usuário no menu principal. Porém, até o momento, não temos nenhum método, na interface AuthInterface, que recupere estes dados para que possamos utilizar.

Nós sabemos que o usuário que iremos capturar, na sessão, é do tipo **SONFin\Models\User**. Porém, neste projeto, estamos utilizando Eloquent, mas amanhã podemos estar utilizando outra biblioteca para trabalhar com a persistência de dados, então vamos continuar trabalhando com boas práticas de programação e seguir os conceitos de SOLID.

Então ao invés de criar um método na interface AuthInterface, criaremos uma interface e obrigaremos o nosso *SONFin\Models\User* implementá-la. Assim se quisermos mudar a biblioteca no futuro não teremos problemas, porque ambas teriam que implementar a mesma interface.

Crie a seguinte interface **src/Models/UserInterface.php**. Veja o código abaixo:

```php
namespace SONFin\Models;

interface UserInterface
{
    public function getId():int;
    public function getFullname():string;
    public function getEmail():string;
    public function getPassword():string;
}
```

Depois de criar a interface vamos implementá-la no model. Veja abaixo:

```php
class User extends Model implements JasnyUser, UserInterface
{
	// Code of the class
}
```

Depois de implementar a interface crie os métodos, lembrando que o método *getId* já existia então crie somente os demais:

```php
public function getFullname(): string
{
    return "{$this->first_name} {$this->last_name}";
}

public function getEmail(): string
{
    return $this->email;
}

public function getPassword(): string
{
    return $this->password;
}
```

Após estas implementação vá até o arquivo **src/Auth/AuthInterface** e adicione o seguinte método:

```php
public function user(): ?UserInterface;
```

Desta forma teremos a instância do usuário na autenticação. Neste caso poderíamos ter tanto o retorno de uma insntância de usuário quanto **null**, caso o usuário não estivesse logado, então estamos utilizando um recurso do PHP7.1, que nos permite retornar ou a instância ou o valor nulo.

`?UserInterface`

O símbolo de interrogação faz com que tenhamos esta opção de retornar null além da instância.

Depois de adicionar o método na interface temos que implementar na classe **src/Auth/Auth.php**. Reparem que o método check foi alteramos e o método user foi criado, no código abaixo.

```php
// Altere o método check para o código abaixo, uma vez que já temos um método user implementado
public function check(): bool
{
    return $this->user() !== null;
}

// Implementando método user da interface
public function user(): ?UserInterface
{
    return $this->jasnyAuth->user();
}
```

Agora nós conseguimos pegar o nome do usuário através da instância, então vamos aplicar em nossa navbar, no template **templates/layout.html.twig**.

```html
<ul class="nav navbar-nav navbar-right">
    <li><a>{{ Auth.user().fullname }}</a></li>
    <li><a href="#">Logout</a></li>
</ul>
```

Encontre este trecho de código e faça a implementação, depois disso faça o login novamente e verá o nome do usuário vindo do banco de dados, conforme o email do usuário logado.