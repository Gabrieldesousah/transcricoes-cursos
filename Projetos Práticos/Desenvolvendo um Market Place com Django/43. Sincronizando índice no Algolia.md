# Sincronizando índice no Algolia

Com as configurações corretas e com a classe de integração criada é preciso fazer com que esta classe seja executada no carregamento da aplicação. Porém se não for adicionada uma configuração no arquivo **portal/__init__.py** a classe **PortalConfig** não será carregada e consequentemente a configuração do algolia também não terá efeito.

> Atribuindo classe de configuração inicial da aplicação portal no arquivo _\_init__.py

```python
default_app_config = 'portal.apps.PortalConfig'
```

Ao adicionar esta linha de código ao arquivo *_\_init.py__*, que inicialmente estava vazio, o sistema passa a saber qual é a classe de configuração inicial da aplicação portal. Neste caso a classe **PortalConfig**.

Para saber se está tudo funcinando corretamente é recomendado rodar um comando no terminal:

`python.exe .\manage.py`

Este comando mostrará uma lista de comando disponíveis e o desenvolvedor deve encontrar os seguintes comandos do algolia:

```
[algoliasearch_django]
    algolia_applysettings
    algolia_clearindex
    algolia_reindex
```

| Comando | Descrição |
| ------- | --------- |
| algolia_applysettings | Aplica as configurações a um índice já existente |
| algolia_clearindex | Limpar índice para zerar informações ou recriá-lo |
| algolia_reindex | Reindexar um índice |

O primeiro comando a ser rodado será o **algolia_reindex**.

`python.exe .\manage.py algolia_reindex`

```
The following models were reindexed:
	* Product --> 3
```

Este comando será capaz de sincronizar os dados com o algolia, isso quer dizer que depois de rodar o comando os dados já estarão online no cadastro do usuário no site do algolia. Para conferir basta acessar o painel e ir até o setor **Índices** e analisar os produtos que foram sincronizados.

Caso seja alterado algum produto, no painel administrativo do Django, os dados serão alterados nos índices do algolia também. O desenvolvedor não precisa ficar preocupado em ficar reindexando a qualquer atualização de produto porque este procedimento será executado automaticamente.

Existe uma forma de filtrar quais dados serão reidexados ou não, para que o processo não seja executado a toda atualização para todos os produtos.

É possível fazer a reindexação apenas dos produtos que estejam ativos, por exemplo. Basta criar a lógica na classe de configuração e é possível encontrar exemplos na documentação para fazer esta filtragem. Não será preciso fazer uso deste recurso nesta aplicação, mas é importante o conhecimento do mesmo.

O algolia é uma sistema de buscas muito robusto e não será utilizado todo recurso que ele disponibiliza, mas será muito importante para que saiba como ele trabalha e como podemos configurá-lo.

Depois de fazer todos os procedimentos acima já é possível dizer que o algolia está configurado. O próximo passo será trabalhar com a area de busca através dos índices do algolia.