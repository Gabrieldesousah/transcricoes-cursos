# Iniciando com Iugu

Neste projeto foi adotado o **Iugu** como sistema de pagamento, portanto será feita toda adaptação do processo de pagamento de acordo com o sistema disponibilizado por esta tecnologia.

O modelo de ordens foi criado e o sistema administrativo também, portanto basta prosseguir com o desenvolvimento.

Será necessário ter uma conta no site do *iugu*. Acesse <https://iugu.com/>.

Com iugo é possível cobrar um usuário, fazer transferências entre uma contas e muitos outros recursos.

Ao acessar o painel será necessário alterá-l0 para modo de teste. Desta forma será possível fazer todos os testes de pagamento durante o processo de desenvolvimento.

Para facilitar o desenvolimento existe uma biblioteca de iugu para python. Para instalar esta biblioteca rode o comando abaixo:

```sh
pip3 install iugu-python
```

Lembrando que o comando **pip** depende de sua instalação e da versão que esteja utilizando.

Após a instalação é necessário configurar algumas variáveis para o funcionamento da biblioteca. Exemplos: 

* **account id**
* **api token**

Estas variáveis serão configuradas no arquivo **mktplace/mktplace/settings.py**.

```python
IUGU_ACCOUNT_ID = "0DF27980E6394A10B9062B05B3850..."
IUGU_API_TOKEN = "295872f5b368e0b1121b6e79ab8cd..."
```

Será necessário adicionar uma **API TOKEN** na seção **Configuração da Conta**, no painel administrativo do iugu. Inicialmente só existe acesso ao ID da conta. Veja a imagem abaixo:

![iugu_painel](./images/iugu_painel.png "iugu_painel")

Na imagem você pode ver de onde foram tirados os dados que foram adicionados no projeto. Você deverá ter seus próprios dados para teste.

Depois de adicionar os dados de teste do iugu, nas variáveis acima, crie um arquivo chamado **services.py**, na pasta **mktplace/billing**. Neste arquivo será adicionado qualquer tipo de serviço relacionado ao método de pagamento, como: comunicação com iugu, algumas outras integrações e todo tipo de regras de negócios necessárias para conclusão do pagamento.

A princípio o conteúdo deste arquivo não terá nenhuma regra, mas será adicionado conforme a necessidade do projeto. Por enquanto conterá apenas o código abaixo:

```python
class BillingService(object):
    pass
```

O projeto terá basicamente 3 métodos principais, mas a princípio apenas deixaremos um **pass** para que o Django não considere um erro e continue o processamento.

No próximo módulo será necessário fazer algumas adaptações em relação aos usuários do sistema, porque as configurações do iugu necessitarão dos dados do usuário para processeguir o processamento.