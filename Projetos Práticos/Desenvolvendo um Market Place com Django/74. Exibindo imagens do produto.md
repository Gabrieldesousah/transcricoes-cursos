# Exibindo imagens do produto

Neste módulo será desenvolvida a página de upload de imagens na interface do usuário, para que ele mesmo possa subir suas imagens sem precisa de acesso ao painel administrativo do Django. O ideal é que apenas o super admin tenha este acesso.

O primeiro passo é acessar o arquivo de views **portal/views.py**.

```python
@login_required
def product_images(request, product_id):
    product = get_object_or_404(Product, pk=product_id)
    images = ProductImages.objects.filter(product=product)

    context = {
        'product': product,
        'images': images
    }

    return render(request, 'portal/product_images.html', context)
```

Vejam que está sendo exigido o login para acesso a esta sessão.

O método **product\_images** resgata o produto, de acordo com o id, e depois as imagens relacionadas ao mesmo. Como todos os métodos anteriores é criado uma variável context que contém o produto e suas imagens.

Logo após renderiza um template que ainda não foi criado. Para facilitar duplique o template **product\_question.html** e renomeie para **product\_images.html**.

```html
{% extends 'base.html' %}

{% block title %}Imagens do produto: {{ product.name }} - Market Place{% endblock %}

{% block content %}
<section class="section-content">
    <div class="container">
        <h3>Imagens do produto: {{ product.name }}</h3>
        <br>
        <p><a href="{% url 'my_products' %}">Voltar</a></p>

        <table class="table table_bordered">
            <tr>
                <th>Imagem</th>
                <th>Ação</th>
            </tr>

            {% for image in images %}
            <tr>
                <td class="thumbnail" style="height: 250px;">
                    <img src="{{ image.images }}">
                </td>
                <td>
                    <a href="#">Editar</a>
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
</section>
{% endblock %}
```

Uma vez que existe a view e o template é preciso criar a URL para que o acesso seja completo a esta página criada. Portanto abra o arquivo **portal/urls.py**.

```python
urlpatterns = [
    ...
    ...
    ...
    url(r'^product/(?P<product_id>[\d]+)/images$', views.product_images, name='product_images'),
]
```

Adicione a url acima no final de todas as outras urls configuradas. Esta url, quando acessada, aciona o método product_images que renderiza o template de imagens do produto.

Depois de todos estes passos basta acessar a url abaixo, para ter acesso as imagens de cada produto.

**Exemplo: http://localhost:8000/product/3/images**

A página de exibição de imagens do produto já está concluída. Pode existir alguma melhoria nos próximos módulos, mas a princípio esta é a lógica e está tudo funcionando corretamente, com as imagens vindas do bucket do serviço Amazon S3.