# Liberando CORS

Ensinaremos como liberar o **Cross-Domain** para que seja uma segurança a mais para o browser, que visa evitar que todos os domínios tenham acesso a algum ponto de nossa aplicação.

É necessário fazer a liberação porque isso já vem habilitado no header por padrão, então se queremos trabalhar entre domínios diferentes, precisamos fazer esta liberação.

Estamos trabalhando com três projetos, totalmente distintos, que são: admin, api e webapp.

Precisamos que nossa api se comunique com o webapp, ou seja, envie dados para o front-end e esta comunicação será feita via ajax. Para este processo o **express** tem uma forma muito simples de se trabalhar, utilizando um pacote chamado **CORS**. Com este pacote conseguimos fazer a liberação do cross-domain de uma forma muito simples.

Basta instalarmos este pacote em nossa API e ela estará disponível para todos os nossos ambientes, ou seja, admin e webapp.

Para baixar e instalar o pacote rode o comando abaixo:

`npm install cors --save`

Depois de instalar temos que carregá-lo em nosso arquivo **api/app.js**:

```js
// Adicione o carregamento logo após - var mongoose = require('mongoose');
var cors = require('cors');

// Adicione o middleware logo após - app.use(cookieParser());
app.use(cors());
```

O **cors** é um middleware, como qualquer outro, e deverá ser utilizado e aplicado como tal. Utilizando ele como um middleware estaremos liberando o acesso para todo e qualquer domínio e logo depois já conseguiremos executar nossos ajax de uma forma tranquila e sem erros de *cross-domain*.

Você poderia limitar os tipos de métodos permitidos passando um objeto de configurações dentro do método **cors()**, podemos também limitar as urls que seriam acessíveis, mas em nosso caso aceitaremos todos os tipos de métodos, portanto não passaremos nenhum objeto como parâmetro, como pôde ver no código acima.

As configurações padrões de instalação são suficientes para nosso projeto, por este motivo não passaremos nenhuma configuração extra para o pacote, apenas o utilizaremos como um middleware padrão.