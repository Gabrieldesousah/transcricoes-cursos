# Linux - Instalando PHP e Composer

Neste módulo você aprenderá a instalar e configurar o PHP e o Composer no sistema operacional Linux.

Os passos de instalação serão baseados na versão 14.04 do ubuntu.

No caso do Linux não será necessário instalar outros terminais, pois o terminal nativo é muito bom.

Mantenha sempre o seu Linux atualizado para que não tenha problemas durante a execução de alguns recursos ou programas.

### Instalando o PHP 7.0

Para instalar o php primeiro adicione um repository, com o comando abaixo:

```sh
sudo add-apt-repository ppa:ondrej/php
```

Estamos executando o comando como usuário root(sudo), portanto o terminal exigirá a senha do usuário.

Depois de rodar o comando acima e adicionar o repository será necessário rodar o comando de atualização dos pacotes e depois o comando de instalação.

```sh
# Atualizando pacotes
sudo apt-get update

# Instalando PHP
sudo apt-get install php7.0
```

Para ter certeza que a instalação foi concluída rode o comando abaixo no terminal:

```sh
php -v
```

Esta instalação já vem com algumas extensões ativas e para saber quais são, basta rodar o comando abaixo:

```sh
php -m
```

Porém como queremos alterar algumas configurações, devemos encontrar o arquivo de configuração **php.ini**. Para encontrar o caminho basta digitar o comando abaixo:

```sh
php --ini
```

Você deverá ter uma resposta parecida com esta:

```
Loaded Configuration File:         /etc/php/7.0/cli/php.ini
```

Então você deverá editar o arquivo php.ini que está no endereço acima. Você pode editar via terminal ou abrí-lo, como administrador, em algum programa de edição de texto.

Confira as configurações abaixo:

| Variável                | Valor                       |
|-------------------------|-----------------------------|
| error_reporting         | E_ALL                       |
| display_errors          | On                          |
| display_startup_errors  | On                          |
| error_log               | /var/log/php/php_errors.log |

Certifique-se que as configurações acima estão iguais ao seu arquivo php.ini, caso não esteja altere.

Caso tenha alguma dúvida, ou utilize alguma outra distribuição Linux, acesse o link abaixo que poderá encontrar outras dicas de instalações. O link ensina a instalar o PHP em várias distribuições Linux.

<http://www.2daygeek.com/install-php-7-on-ubuntu-centos-debian-fedora-mint-rhel-opensuse/>

### Instalando Composer

O composer deve ser instalado de forma global em sua máquina, para que você não precise ficar transportando o arquivo **composer.phar** para todos os projetos que for desenvolver. De forma global, você pode utilizar o composer em qualquer local de sua máquina, sem precisar do arquivo **.phar**.

Para instalar o Composer rode os comandos abaixo em sequência. Os comandos foram retirados do link <https://getcomposer.org/download/>.

```
php -r "copy('https://getcomposer.org/installer', 'composer-setup.php');"

php -r "if (hash_file('SHA384', 'composer-setup.php') === '669656bab3166a7aff8a7506b8cb2d1c292f042046c5a994c43155c0be6190fa0355160742ab2e1c88d40d5be660b410') { echo 'Installer verified'; } else { echo 'Installer corrupt'; unlink('composer-setup.php'); } echo PHP_EOL;"

php composer-setup.php

php -r "unlink('composer-setup.php');"
```

Depois de rodar todos estes comandos você terá, como resultado, o arquivo **composer.phar**. Vale a pena lembrar que este arquivo será criado no mesmo local em que estiver acessando no terminal.

Para testar o arquivo você pode executá-lo com o php, rodando o comando abaixo:

```sh
php composer.phar
```

Você terá acesso a todos os comandos do composer, mas não é este nosso objetivo. Nosso objetivo é instalar de forma global para que consiga ter acesso aos comandos de qualquer local da máquina.

Para transformar em um comando global basta mover o arquivo composer.phar para a pasta de binários, ou executáveis, do Linux. Para isso rode o comando abaixo:

```sh
sudo mv composer.phar /usr/local/bin/composer
```

Agora você pode acessar qualquer pasta, em seu terminal, e rodar o comando **composer** e terá acesso direto aos comandos de forma global.

Com o PHP e com o composer instalados você só precisará instalar o MySQL e terá o ambiento pronto para iniciar o projeto.

Lembrando que não será necessário instalar Apache ou Nginx, pois utilizaremos o servidor embutido do PHP.

No próximo módulo aprenderá a instalar o MySQL, que será o banco de dados utilizado no projeto.