# Comunicação de componentes pais e filhos

Iremos ensinar como fazer a comunicação entre componentes pais e filhos, nos dois sentidos.

## Exemplo em time-list.component.js

Neste componente temos um método chamado **createNovoJogo**, porém agora que vamos exemplificar, achamos melhor alterar o nome deste método. Mudaremos porque dentro do outro componente existe o mesmo método com o mesmo nome, porém eles terão sentidos diferentes. Passaremos a chamar este método de **showNovoJogo**.

Portanto lembre-se de modificar o evento `@click` do botão para o mesmo nome acima. `<a class="btn btn-primary" @click="showNovoJogo">Novo jogo</a>`.

Após alteração efetuada, iremos ao conceito de comunicação entre componentes. Veja o código abaixo:

```
showNovoJogo(){
    let indexCasa = Math.floor(Math.random() * 20),
        indexFora = Math.floor(Math.random() * 20);

    this.novoJogo.casa.time = this.times[indexCasa];
    this.novoJogo.casa.gols = 0;
    this.novoJogo.fora.time = this.times[indexFora];
    this.novoJogo.fora.gols = 0;
    this.showView('novoJogo');
},
```

A última linha possue o **this** para acessar o método que está no componente pai. O grande problema está neste **this** porque o this se refere ao próprio componente, que por sua vez não possue este método. Para resolver isso o Vue tem uma variável chamada parent `$parent`. Acessando esta variável antes de acessar o método nós conseguiremos esta comunicação. Veja o exemplo correto abaixo:

```
showNovoJogo(){
    /*let indexCasa = Math.floor(Math.random() * 20),
        indexFora = Math.floor(Math.random() * 20);

    this.novoJogo.casa.time = this.times[indexCasa];
    this.novoJogo.casa.gols = 0;
    this.novoJogo.fora.time = this.times[indexFora];
    this.novoJogo.fora.gols = 0;*/
    this.$parent.showView('novoJogo');
},
```

Para vermos se está realmente funcionando devemos voltar a view padrão para **tabela** na propriedade data do componente pai. Desta forma o Vue renderizará a tabela e o botão para novo jogo.

Comentamos todo o código do método **showNovoJogo** e deixamos somente a última linha para que possa ver a mudança de view apenas funcionando. Caso queira analisar melhor, pode inserir um `console.log(this.$parent)` e conseguirá ver a instância do Vue e todos os métodos acessíveis por ela, inclusive o método **showView**.

Tudo bem, conseguimos alterar a view, mas para que o jogo seja gerado precisamos acessar o método do componente time-jogo.component.js que no caso não é pai, mas sim irmão deste primeiro componente.

## Como acessar um método de um componente irmão?

Existe uma outra variável do Vue que se chama **children**, com ela conseguimos acessar todos os componentes filhos do componente pai.

Para visualizar melhor vamos inserir um `console.log(this.$parent.$children)` no método **showNovoJogo**. Isso quer dizer que quando clicar no botão de novo jogo não aparecerá nada, mas poderemos analisar os métodos de todos os filhos existentes. Veja código e imagem abaixo:

```
showNovoJogo(){
    /*let indexCasa = Math.floor(Math.random() * 20),
        indexFora = Math.floor(Math.random() * 20);

    this.novoJogo.casa.time = this.times[indexCasa];
    this.novoJogo.casa.gols = 0;
    this.novoJogo.fora.time = this.times[indexFora];
    this.novoJogo.fora.gols = 0;*/
    console.log(this.$parent.$children);
    this.$parent.showView('novoJogo');
},
```

