# Retrospectiva da aplicação de times

Iremos fazer uma retrospectiva do que foi passado no conteúdo de Vue 2 para ficarmos sintonizados no que iremos fazer agora, neste conteúdo de Vuex.

# Arquivo index.html

```html
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>vue2</title>
</head>
<body>
<div id="app" class="container">
    <div class="row">
        <h3>Campeonato Brasileiro - Série A - 2016</h3>
        <a class="btn btn-primary" @click="createNovoJogo">Novo jogo</a>
        <br/><br/>
        <div v-if="view == 'tabela'">
            <input type="text" class="form-control" v-model="filter">
            <table class="table table-striped">
                <thead>
                <tr>
                    <th v-for="coluna in colunas">
                        <a href="#" @click.prevent="sortBy(coluna)">{{coluna | ucwords}}</a>
                    </th>
                </tr>
                </thead>
                <tbody>
                    <tr v-for="time in timesFiltered">
                        <td>
                            <img :src="time.escudo" style="height: 30px; width: 30px;">
                            <strong>{{time.nome}}</strong>
                        </td>
                        <td>{{time.pontos}}</td>
                        <td>{{time.gm}}</td>
                        <td>{{time.gs}}</td>
                        <td>{{time | saldo}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <!--<div v-if="view == 'novojogo'">-->
        <div v-else>
            <form class="form-inline">
                <div class="form-group">
                    <input type="text" class="form-control" v-model="novoJogo.casa.gols" @keyup.enter="fimJogo">
                    <label class="control-label">
                        {{novoJogo.casa.time.nome}}
                        <img :src="novoJogo.casa.time.escudo" style="height: 30px; width: 30px;">
                    </label>
                </div>
                <span>X</span>
                <div class="form-group">
                    <label class="control-label">
                        <img :src="novoJogo.fora.time.escudo" style="height: 30px; width: 30px;">
                        {{novoJogo.fora.time.nome}}
                    </label>
                    <input type="text" class="form-control" v-model="novoJogo.fora.gols">
                </div>
                <button type="button" class="btn btn-primary" @click="fimJogo">Fim de jogo</button>
            </form>
        </div>
    </div>
</div>
<script src="/dist/build.js"></script>
</body>
</html>
```

Copiamos o index.html para aplicação atual. Podemos ver que a aplicação foi desenvolvida utilizando o Bootstrap.

Em resumo podemos dizer que temos o título, um botão para adição dos jogos e dois blocos a serem renderizados pelo Vue. Os dois blocos são condicionais, caso a view seja **tabela** ele renderiza o bloco da tabela caso seja **novojogo** renderiza o formulário de novo jogo.

Lembrando que na view tabela, eram listados os times e tínhamos aplicado um filtro, para busca dos times.

No formulário dos jogos, nós atribuíamos os placares, definíamos o time da casa e o visitante, depois era só finalizar o placar que o resultado era processado e voltava para a tabela já modificando os dados.

E no final do arquivo temos a chamada do javascript empacotado pelo webpack.

`<script src="/dist/build.js"></script>`

# Arquivo package.json

Neste arquivo adicionamos a dependência do Bootstrap, jQuery e da biblioteca lodash. Por que precisamos para que tudo funcione corretamente, uma vez que em nossa instalação só tinha a dependência do Vue.

```
"dependencies": {
    "bootstrap": "^3.3.7",
    "jquery": "^3.1.1",
    "lodash": "^4.16.4",
    "vue": "^2.0.1"
},
```

Lembrando que temos que configurar o **provide plugin**, no arquivo webpack.config.js, para conseguir utilizar o jQuery normalmente, sem que tenha erros, na aplicação.

```
plugins: [
  new webpack.ProvidePlugin({
    'jQuery': 'jquery'
  })
],
```

Acrescentamos duas dependências de desenvolvimento ao package.json.

**style-loader**: para injetar o css do bootstrap no html

**url-loader**: para poder trabalhar com as fontes do Bootstrap

Para configurar o url-loader, no arquivo webpack.config.js, inserimos a configuração abaixo:

```
module: {
    rules: [
        {
            test: /\.(woff|woff2|ttf|svg|eot)$/,
            loader: 'url-loader'
        }
    ]
},
```

Desta forma o test se encarrega de carregar todas as fontes para nós.

Não se esqueça de rodar o comando `$ npm update`, em seu terminal, depois de adicionar estas dependências e loaders. Se não rodar, estas alterações estarão apenas no arquivo package.json, mas não em sua aplicação.

# Classe Time

Nós criamos uma classe chamada Time para que pudéssemos trabalhar com os dados de cada time. Dentro da classe temos os atributos: nome, escudo, pontos, gols marcados e gols sofridos.

Além do construtor desta classe, que é responsável por carregar valores aos atributos, temos também mais dois métodos: updateInfo e fimJogo.

**updateInfo:** Responsável por atualizar os dados dentro da classe.

**fimJogo:** Responsável por analisar quem ganhou, perdeu ou se houve empate na partida e depois atribui a pontuação para cada time.

# Arquivo main.js

Toda lógica da aplicação está neste arquivo main.js. Todo carregamento de biblioteca, modelos de dados, métodos e filtros que utilizamos na aplicação.

Portando trouxemos o conteúdo inteiro e substituimos no main.js atual.

# Conclusão

Faça alguns testes, para ver se realmente a aplicação está funcionando, antes de qualquer outra coisa.

O objetivo agora, depois de tudo funcionando corretamente, é refatorar a aplicação transformando tudo, que for possível, em componente.

Você deve sempre utilizar componentes ao invés de desenvolver ,sua aplicação inteira, utilizando somente a instância do Vue. A não ser que sua aplicação seja muito pequena. Porque se utilizar tudo dentro do arquivo main.js sua aplicação ficará uma bagunça e, com certeza, não irá conseguir manter ela por muito tempo.

Com a nova web, que temos atualmente, nós temos que visar sempre o novo conceito de web components. O Vue.js incorpora este conceito, portanto vamos passar toda a aplicação para componentes à partir de agora. Iremos trabalhar bastante com imports e requires para conseguir utilizar os componentes.