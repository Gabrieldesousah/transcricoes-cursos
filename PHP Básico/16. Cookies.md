# Cookies

Vamos falar agora sobre cookies. Aprender alguns exemplos d eutilização e também mostrar como criar cookies no PHP e como utilizar em suas implementações/

Antes de mais nada iremos falar o que vocês precisam saber sobre os cookies antes de continuar.

Cookies, a princípio, é um tipo de variável que você vai registrar um nome, dar um valor a ela e depois gravar esta variável no browser do usuário. Então você deve saber que os cookies são gravados no navegador do usuário.

Um exemplo, de uso de cookies, é quando você grava o nome do usuário, para fazer um cumprimento pessoal, quando ele entra em seu site ou aplicação. Outro exemplo é quando o usuário acessa em um dia seu sistema e você salva, além do nome, o email deste cliente, assim quando ele acessar a mesma página no outro dia, se o cookie ainda estiver gravado você facilita a vida do usuário trazendo este email já salvo.

Mas você não pode confiar apenas nos cookies, porque simplesme o usuário pode, de uma hora para outra, limpar os dados do navegador e com isso ele estará removendo os cookies que você criou.

O cookie é muito útil, mas temos que saber tratar de forma correta, em qualquer aplicação, para não termos problemas.

# Criando primeiro cookie

Para criar um cookie utilizamos a função do PHP: `setcookie(chave,valor);`

```php
// Criando cookie
setcookie("name" , "Guilherme");
```

Quando você atualizar o seu browser não irá aparecer nada. Para realmente ver se funcionou você deve abriar o developer tools, clicando em inspecionar elemento, e depois ir até a aba Resources ou Application. Acessando esta aba você pode pesquisar por cookies que você irá encontrar, depois basta clicar no link da referente a sua aplicação.

# Resgatando cookie criado

```php
// Imprimindo cookie
echo "Hello " . $_COOKIE["name"];
```

Agora basta atualizar seu navegador e já aparecerá o cumprimento ao usuário referente ao cookie. Basta alterar o valor do cookie e atualizar a página para ver que o valor será alterado também.

# Exemplo com configurações de estilização

Imagina que o usuário tenha a possibilidade de escolher a cor do painel administrativo dele, em sua aplicação. Mas isso deve ser alterado apenas no navegador dele, porque o usuário x pode escolher azul e o y escolher vermelho. Este caso é um bom exemplo para entender o funcionamento do cookie, uma vez que os dados são gravados no navegador pessoal da pessoa. Então o cookie que será gravado no navegador do usuário x não será o mesmo cookie gravado no navegador do usuário y.

```php
setcookie("color" , "red");

echo "Hello " . $_COOKIE["name"];

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
</head>
<body bgcolor="<?= $_COOKIE["color"]; ?>">

</body>
</html>
```

Agora se atualizar o navegador você terá o cookie gravado, mas ainda não terá o background alterado, porque o promeiro reload é para gravar o cookie, que até então não existia, para ver a alteração do background terá que atualizar a página mais uma vez.

Desta forma temos uma aplicação totalmente personalizada de seu usuário. Isso é ótimo porque está utilizando a própria máquina do usuário para gravar estes dados. Imagina gravar em banco de dados, informações de 1000 usuários específicos? Seria inviável, então esta é uma boa prática de utilização do cookie, mas lembre-se, se o usuário limpar os cookies do navagador ele precisará configurar novamente estes cookies

# Determinando tempo de validade do cookie

```php
// Duração de 1 hora
setcookie("hora"    , "tempo"   , time()+3600);
// Duração de 1 dia
setcookie("dia"     , "tempo"   , time()+3600*24);
// Duração de 1 semana
setcookie("semana"  , "tempo"   , time()+3600\*24*7);
// Duração de 1 mês
setcookie("mes"     , "tempo"   , time()+3600\*24\*7*4);
// Duração de 1 ano
setcookie("ano"     , "tempo"   , time()+3600\*24\*7\*4*12);
```

![set_cookies_time](./images/set_cookies_time.png "set_cookies_time")

# Conclusão

Sabia que estes são exemplos simples, mas você tem um campo enorme para trabalhar, com cookies, de acordo com a necessidade de seu projeto. Então faça alguns testes para fixar melhor e insira tempos curtos para ir acompanhando a expiração dos cookies.