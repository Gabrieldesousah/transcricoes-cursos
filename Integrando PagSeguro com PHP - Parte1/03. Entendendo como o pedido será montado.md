# Entendendo como o pedido será montado

Para que comecemos a colocar a mão na massa, iremos começar a configurar nossos testes.

Crie um diretório chamado **Payments** e dentro crie um arquivo chamado **PagseguroTest.php**. Fizemos desta forma porque, no futuro, criaremos outras formas de pagamento, sem ser utilizando Pagseguro e assim você poderá aproveitar o projeto.

### Conteúdo arquivo PagseguroTeste.php

```php
<?php
namespace BrPayments\Payments;
class PagSeguroTest extends \PHPUnit\Framework\TestCase
{
    public function setUp()
    {
        $access = [
            'email'=>'email@email',
            'token'=>'token',
            'currency'=>'BRL',
            'reference'=>'REF1234'
        ];
        $this->pag_seguro = new PagSeguro($access);
        //name, areacode, phone, email
        $this->pag_seguro->customer('Jose Comprador', 11, 99999999, 'comprador@comprador.com.br');
        //type, street, number, complement, district, postal code, city, state, country
        $this->pag_seguro->shipping(
            1,
            'Av. PagSeguro',
            99,
            '99o andar',
            'Jardim Internet',
            99999999,
            'Cidade Exemplo',
            'SP',
            'ATA'
        );
        //id, description, amount, quantity, wheight(optional)
        $this->pag_seguro->addProduct(1, 'Curso de PHP', 19.99, 20);
        $this->pag_seguro->addProduct(2, 'Livro de Laravel', 15, 31, 1.5);
    }
    public function testListarProdutosAdicionadosEmUmArray()
    {
        $this->assertEquals(true, true);
    }
}
?>
```

Reparem que criarmos o método **setUp** que é reponsável por montar os dados que precisamos para depois enviarmos para a API. Existe um outro comando, que geralmente é utilizando junto como o setUp, chamado **tearDown**, este é responsável por destruir todos os dados que foram criados no setUp.

Nós não iremos utilizar porque sempre que rodarmos os testes os valores serão substituídos por novos valores então não existe a necessidade de removermos, vamos manter somente o setUp mesmo, para nossos testes.

O primeiro passo foi configurar a varíavel **$access** com os dados de acesso. Depois instanciamos a classe do pagseguro com os dados de acesso.

`$this->pag_seguro = new PagSeguro($access);`

O próximo passo é passar os dados do comprador, para um método chamado **customer**, os dados da entrega para um método chamado **shipping** e, por último, podemos ir adicionando os produtos, com os dados específicos, utilizando o método **addProduct**.

Em nosso exemplo adicionamos apenas dois produtos, mas você poderia adicionar mais.

Depois de finalizar nosso método setUp nó criamos uma classe de teste que listará os arquivos adicionados, mas por enquanto deixamos apenas um teste de acerto obrigatório passado **true** para o esperado e **true** para o valor recebido, obrigando que o teste seja um acerto.

Agora rodando o teste, obrigatóriamente, teremos um erro, pois as classes utilizadas ainda não foram criadas, mas agora podemos criá-las com base nestes testes.

Para rodar os testes você tem duas opções.

1. Caso esteja rodando diretamente do seu projeto
    * `php vendor/bin/phpunit`
2. Se você tiver instalado a ferramente de forma global
    * `phpunit`

Se você nunca trabalhou com PHPunit, provavelmente, conseguirá utilizar somente a primeira forma, pois não terá instalado, em sua máquina, de forma global.

Quando executa o primeiro comando está acessando o arquivo binário do phpunit que foi criado durante a instalação com Composer.

No caso do segundo exemplo nós estamos partindo do princípio que registrou o comando com o nome de **phpunit** para executar, mas quando configurou a variável de ambiente você pode ter renomeado o arquivo **.phar** e poderá ter um outro nome para execução.

Vale a pena lembrar que o primeiro modo é válido para ambos os casos, pois o arquivo está localmente instalado em seu projeto.

Vale a pena informar que você pode estar utilizando versões melhores do que a de número 6, se este for o caso deve alterar a forma de extender a classe de testes.

Estamos utilizando desta forma:

`class PagSeguroTest extends \PHPUnit\Framework\TestCase`

Caso esteja com uma versão menor do que a 6 deverá extender desta forma:

`class PagSeguroTest extends \PHPUnit_Framework_TestCase`