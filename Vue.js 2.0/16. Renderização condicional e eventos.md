# Renderização condicional e eventos

Iremos organizar ainda mais a nossa aplicação. Não queremos mais mostrar os nossos jogos na parte de baixo.

E também queremos mostrar ou a tabela ou o placar. Não queremos deixar da maneira que está agora, mostrando os dois.

Existe uma funcionalidade do Vue.js que nos permite fazer uma renderização condicional, ou seja, através de alguma lógica iremos verificar, se for verdadeiro mostramos senão escondemos alguns blocos.

Portanto existe a possibilidade de trabalharmos com if e else com nosso Vue.js para renderização de blocos de elementos HTML.

Temos atualmente dois blocos.

1. Tabela
2. Jogos com placar

Iremos criar um modelo de dados para guardarmos qual a tela que estamos exibindo no momento.

Criaremos uma propriedade chamada **view** e que por padrão será iniciada com **tabela**.

```
data: {
    view: 'tabela'
}
```

Após criado nosso modelo, iremos até a nossa view para efetuarmos o nosso teste condicional.

Iremos inserir nossos dois blocos dentro de uma mesma **row** do nosso bootstrap. E dentro desta div colocaremos cada bloco dentro de outra div para que possamos fazer nossa estrutura condicional.

Estamos utilizando **div** mas você pode utilizar outra tag caso seja necessário ou de sua preferência.

```html
    <div id="app" class="container">
      <div class="row">
        <h3>Campeonato Brasileiro - Série A - 2016</h3>
        <div>
          <table class="table table-striped">
            <thead>
            <tr>
              <th v-for="coluna in colunas">{{ coluna | ucwords }}</th>
            </tr>
            </thead>
            <tbody>
            <tr v-for="(time,index) in times">
              <td>
                <img :src="time.escudo" :alt="time.nome" style="height: 30px; width: 30px;">
                <strong>{{ time.nome }}</strong>
              </td>
              <td>{{ time.pontos }}</td>
              <td>{{ time.gm }}</td>
              <td>{{ time.gs }}</td>
              <td>{{ time | saldo }}</td>
            </tr>
            </tbody>
          </table>
        </div>
        <div>
          <form class="form-inline">
            <div class="form-group">
              <input type="text" class="form-control" v-model="novoJogo.casa.gols">
              <label class="control-label">
                {{ novoJogo.casa.time.nome }}
                <img :src="novoJogo.casa.time.escudo" style="height: 30px; width: 30px;">
              </label>
            </div>
            <span>X</span>
            <div class="form-group">
              <label class="control-label">
                <img :src="novoJogo.fora.time.escudo" style="height: 30px; width: 30px;">
                {{ novoJogo.fora.time.nome }}
              </label>
              <input type="text" class="form-control" v-model="novoJogo.fora.gols">
            </div>
            <button type="button" class="btn btn-primary" @click="fimJogo">Fim de jogo</button>
          </form>
        </div>
      </div>
    </div>
```

Após refatorada nossa estrutura iremos lhe mostrar a nova diretiva capaz de realizar os testes condicionais.

# v-if e v-else

Iremos inserir o v-if seguido da nossa lógica, caso retorne true o conteúdo será exibixo, caso contrário ele será escondido automaticamente. O Vue.js insere um `display:none` em nosso css pra gente. Desta forma não precisamos ter trabalho nenhum.

```html
<div v-if="view == 'tabela'">
    <!-- Código da tabela -->
</div>
```

```html
<div v-if="view == 'novoJogo'">
    <!-- Código do placar -->
</div>
```

Depois destas alterações você pode dar um refresh em seu browser e poderá ver que nosso placar desapareceu. Ele continua sendo renderizado, caso queira verificar no console, porém ele não aparece mais, porque definimos a nossa propriedade view como tabela inicialmente.

Como podemos trabalhar uma hora com a tabela e outra hora com o placara?

Podemos criar um botão ou uma âncora, que chamaria um métodos capaz de alterar estas views pra gente.

```html
<a class="btn btn-primary" @click="createNovoJogo">Novo Jogo</a>
```

Acima nosso html e abaixo nosso método criado dentro da propriedade **methods** de nossa instância. Do mesmo jeito do que já foi criado anteriormente.

```
createNovoJogo(){
    let indexCasa = Math.floor(Math.random()*20),
        indexFora = Math.floor(Math.random()*20);

    this.novoJogo.casa.time = this.times[indexCasa];
    this.novoJogo.casa.gols = 0;
    this.novoJogo.fora.time = this.times[indexFora];
    this.novoJogo.fora.gols = 0;
    this.showView('novoJogo');
},
showView(view){
    this.view = view;
}
```

Repare que movemos o conteúdo da nossa propriedade **created** e passamos para este nosso método, porque ele passa a ser o responsável pela geração dos jogos pra gente. Podemos depois remover nossa propriedade created do nosso projeto, pois ela não é mais necessária.

Logo depois colocamos o seguinte código: `this.showView('novoJogo');`. Repare que podíamos fazer diretamente a alteração da view porém criamos um outro método chamado **showView** para que pudessemos utilizar para alterar para qualquer view existente em nosso projeto. Basta agora achamar o método e passar a view que quisermos.

Este será responsável por alterar a view pra gente. Portanto no mesmo método temos duas funções:

1. Gera o jogo
2. Modifica a view para placar, com o jogo já criado

Do mesmo modo que alteramos a view utilizando o método **showView** podemos incluir este método no outro método chamado **fimJogo** para que após as alterações na tabela ele possa retornar para a view **tabela**. Se não fizermos isso o método **fimJogo** irá alterar a tabela mas continuaremos na view **novoJogo**. Veja abaixo como fica o código:

```
fimJogo(){
    let timeAdversario = this.novoJogo.fora.time;
    let gols = +this.novoJogo.casa.gols;
    let golsAdversario = +this.novoJogo.fora.gols;
    this.novoJogo.casa.time.fimJogo(timeAdversario, gols, golsAdversario);
    this.showView('tabela');
},
```

O método inteiro já haviamos criado,  a única alteração foi a inclusão do nosso método **showView** passando o parâmetro **tabela** para que voltasse para a tabela após a alteração dos dados.

Basta agora fazer vários testes para concluir a funcionalidade e a forma brilhante de como o Vue trabalha e facilita a vida do desenvolvedor.

Você já deve ter ouvido falar ou lido a respeito de Single Page Aplication - SPA, não iremos falar neste conteúdo, mas não necessariamente precisamos trabalhar com single page aplication em todos os casos, dependendo o projeto podemos utilizar esta estrutura condicional e já será mais do que suficiente.

Falamos do v-else e não mostramos um exemplo. Em nosso caso como existe somente dois testes podíamos ter utilizado v-if no primeiro bloco e no segundo já poderíamos ter utilizado o v-else conforme abaixo:

```html
<div v-if="view == 'tabela'">
    <!-- Código da tabela -->
</div>
```

```html
<div v-else>
    <!-- Código do placar -->
</div>
```

Funcionaria da mesma forma. Utilizamos o v-if quantas vezes forem necessárias e podemos utilizar o v-else quando não houverem mais possibilidades condicionais. Fica a seu critério o uso do v-else. Como se fosse em uma estrutura lógica de programação.

Outra coisa que queremos destacar é referente ao link que utilizamos. Com o uso do evento **@click** funcionou, mas existe uma outra forma.

Nós sabemos que a âncora possui o evento do **href** que em nosso caso não disparou, mas para evitar este disparo podemos utilizar o **.prevent** associado ao nosso **@click**. O prevent é um modificador de evento e irá cancelar o evento do href para disparar o evendo configurado no click.

Com o prevent podemos até pegar qual a tecla que o usuário está pressionado em um evento **keyup**, por exemplo.

```html
<a class="btn btn-primary" @click.prevent="createNovoJogo">Novo Jogo</a>
```

Imagem sem **prevent**:

![vue-event-prevent](./images/vue-event-privent.png "vue-event-prevent")

Imagem com **prevent**:

![vue-event-sem-privent](./images/vue-event-sem-privent.png "vue-event-sem-privent")

Observamos que é inserida uma hash tag **#** em nossa url, isso pode nos trazer problemas durante o desenvolvimento de nosso projeto, portanto é sempre recomendado a utilização do privent.

Em nosso caso, como não estamos utilizando href e conseguimos mostrar nosso placar, normalmente, não iremos utilizar. Mas fiquem atentos a este recurso que o Vue nos proporciona, ele pode ser muito útil.

Para finalizar podemos colocar uma cereja no bolo. Podemo inserir um evento **keyup** para que o placar seja efetivado clicando em **enter** após a inserção dos resultados. Assim o usuário pode tanto clicar no botão Fim de jogo ou apertar o enter que terá o mesmo efeito. Veja no exemplo abaixo:

```html
<input type="text" class="form-control" v-model="novoJogo.casa.gols" @keyup.enter="fimJogo">
```

Pronto! Desta forma o usuário pode tanto clicar no botão de fim de jogo, quanto pressionar **enter**, no teclado, para efetivar o resultado.