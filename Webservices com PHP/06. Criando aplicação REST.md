# Criando aplicação REST

Iremos criar uma aplicação utilizando os conceitos de REST e, para isso, utilizaremos o Lumen Framework, que é o mini framework do Laravel.

O Lumen tem um foco 100% em API RESTful, além de ser muito enxuto e muito fácil de utilizar. Estes foram os critérios para a escolha do framework para criar nossa API de exemplo para o conteúdo atual. Lembrando que poderíamos criar com qualquer outro framework.

Caso queira saber mais sobre Lumen, existe conteúdo específico na School of Net para que você possa saber mais sobre o framework.

Temos que deixar bem claro que não estamos incentivando você a construir suas APIs utilizando o Lumen, nós somente vamos utilizar para passar o conceito de REST utilizando um framework PHP, que no caso escolhemos o Lumen, mas não fique preso a este detalhe. Fiquem atentos aos conceitos de REST que você aproveitará o máximo do nosso conteúdo e este é nosso objetivo.

Para conseguir instalar o Lumen você precisará do Composer, instalado em sua máquina. Precisará, consequentemente, do PHP instalado também e obrigatóriamente deverá ser, no mínimo, a versão 5.5.9, que é a versào compatível com o Lumen 5.2 que iremos utilizar.

Precisará também de algumas extensões do PHP ativas como php\_pdo e php\_pdo\_sqlite. Nós utilizaremos o PDO para persistir nossos dados e fazer testes.

Antes de rodar o comando de instalação do Lumen você pode atualizar a versão do seu composer rodando `composer selfupdate` e depois, rode o comando de instalação abaixo:

`composer create-project --prefer-dist laravel/lumen php-webservice`

Caso esteja lendo este conteúdo e não conheça PHP, procure em nossos conteúdo o tema PHP que você encontrará muito material para estudo. Para entender os módulos você precisará saber PHP.

Depois de concluir a instalação você precisará criar uma cópia do arquivo de configuração de ambiente. Na instalação do Lumen já vem um arquivo de exemplo, então basta fazer uma copia deste arquivo. Primeiro acesse a pasta do projeto, que foi criado, e rode o seguinte comando:

`cp .env.example .env`

Depois disso precisaremos criar uma chave de segurança que será utilizada para autenticação durante a utilização da API. Se fosse o Laravel já tínhamos um comando no **artisan** que gera esta chave para nós, mas no Lumen, por ser um mini framework de Laravel, não temos esta opção.

Este key deve conter 32 caracteres então geraremos 3 sequências de 1 à 9 e mais uma de 1 à 5, para completar esta chave de 32 caracteres.

**12345678912345678912345678912345**

Depois de adicionar **APP_KEY** iremos configurar a conexão do banco de dados para **sqlite**. O seu arquivo **.env** deverá estar com o seguinte conteúdo:

```
APP_ENV=local
APP_DEBUG=true
APP_KEY=12345678912345678912345678912345
APP_TIMEZONE=UTC

DB_CONNECTION=sqlite
\#DB_HOST=127.0.0.1
\#DB_PORT=3306
\#DB_DATABASE=homestead
\#DB_USERNAME=homestead
\#DB_PASSWORD=secret

CACHE_DRIVER=memcached
QUEUE_DRIVER=sync
```

Reparem que além de configurar o DB_CONNECTION como sqlite, nós comentamos todas as outras configurações, porque não precisaremos de conexão.

Depois desta configuração basta criarmos o arquivo que será nosso banco de dados. Rode o comando abaixo para criar o banco de dados na pasta **database**.

`touch database/database.sqlite`

Agora já temos o arquivo de configuração **.env** e o banco de dados devidamente configurados, já podemos testar a aplicação. Rode o comando do servidor embutido, do PHP, apontando para o arquivo de entrada da aplicação:

`php -S localhost:8000 -t public public/index.php`

Agora, que está rodando o servidor embutido, basta acessar o navegador no endereço **http://localhost:8000**.

Nós tivemos o seguinte conteúdo:

> Lumen (5.2.8) (Laravel Components 5.2.*)

Você pode estar lendo este conteúdo e obter uma versão mais atual, porque o framework está em constante evolução, mas no momento em que criamos este conteúdo nós estávamos na versão acima.

Caso chegou a algum conteúdo em seu browser, e sem erros, está tudo em ordem e já temos a aplicação rodando. Agora daremos continuidade ao conteúdo de REST estruturando nossa API.