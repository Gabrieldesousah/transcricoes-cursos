# O que é REST

Falaremos do padrão REST o qual utilizamos para criar um webservice.

REST é um acrônomo para **REPRESENTATIONAL STATE TRANSFER** (Transferência de estado representacional ) e foi um padrão proposto por **Roy Fielding** em 2000. Caso queira saber mais sobre a história, deste conceito REST, você pode ir até o site da W3C.

O mais importante, e que temos que ter em mente, é saber que REST é apenas uma arquitetura. Estamos falando de uma maneira simplificada para lhe mostrar que é exatamente neste ponto que este padrão se difere do SOAP, pois SOAP é um protocolo pra criarmos um webservice. Então este é o ponto principal que irá diferenciar os dois padrões/tecnologias.

Com REST você vai precisar apenas do protocolo HTTP para criar o seu webservice, enquanto com o SOAP você vai precisar da implementação do próprio SOAP onde você estiver utilizando o webservice. Para isso o PHP possui uma extensão que ativa o SOAP para o uso do mesmo.

Desde quando a web foi criada usávamos o protocolo HTTP para fazer esta arquitetura cliente/servidor funcionar, só que quando este conceito de webservice saiu nós não tínhamos um padrão para criar um webservice somente com o HTTP. Além disso, antigamente, nós tínhamos apenas dois verbos HTTP, quando precisávamos pegar uma informação utilizávamos o **get** e quando precisávamos enviar utilizávamos o **post**.

Falando em outras palavras nós utilizávamos o HTTP, na web, de forma muito simplórea, era algo que permitia que criássemos as aplicações, mas não era uma forma inteligente de utilizar o protocolo. Então o REST nasceu, para que conseguíssemos utilizar o HTTP, para criar o webservice e também para que usássemos o HTTP de forma inteligente. Assim podemos construir o webservice e permitir que as pessoas consumam as informações, além de criar ou alterar, estas informações, no servidor em que estiver o nosso webservice.

Então podemos falar que o REST é uma arquitetura que permite, de forma inteligente, a utilização do HTTP para realizar uma transferência de estato. É ai que está a grande dúvida: ver esta transferência de estado representacional. O que isso significa?

Imagine que a sua aplicação, que você desenvolve em seu servidor, terá um estado e estado é a informação que a aplicação tem no momento em que estamos analisando, ou seja, quando fazemos uma requisição ao servidor nós estaremos alterando o estado anterior da aplicação. Isso significa que temos um estado antes e outro estado depois da requisição.

A arquitetura irá permitir que possamos gerenciar esta representação de estado, ou seja, permite que alteremos este estado a medida que seja necessário.

Imagine que tenhamos cadastro de clientes em nossa API, os dados dos clientes que estão na aplicação representam o estado da aplicação atual. Através do HTTP e dos verbos que criamos, nós permitimos a troca deste estado, ou transferência de estado. Ex.: cadastrar um cliente, alterar um cliente ou excluir um cliente. Tudo isso através da arquitetura REST utilizando o protocolo HTTP.

Tudo que fizermos com REST irá se resumir em uma consulta, ou uma criação, ou uma atualização ou uma exclusão deste recurso. Nós iremos ver tudo isso, com mais detalhes, no decorrer do conteúdo.

Trabalhando com REST estaremos utilizando, o tempo inteiro, os verbos HTTP: **get**, **posts**, **put**, **delete**, **patch**, **options**, etc. A arquiterura REST acaba dando sentido e significa para cada verbo HTTP, para que você possa utilizar de forma estruturada e direcionada, pois cada verbo tem seu papel e objetivo.

Quando você desenvolve um webservice utilizando REST não basta sair utilizando os verbos e retornando dados, você tem uma procedimento a ser seguido um padrão de utilização para cada verbo. A arquitetura prevê uma série de questões que você tem que implementar para, de fato, ter um webservice com REST. Uma delas é a utilização de **MEDIA-TYPES**.

Imagine que você criou uma API, usando REST, criou uma interface de programação, mas seu REST não tem opções de dados, a sua API não consegue trabalha com XML, não consegue trabalhar com JSON, sua API não consegue informar, pra quem está consumindo os dados/informações, quais tipos de dados ela trabalha. Então a sua API deve fornecer as informações, tanto de recebimento quanto de retorno de dados.

Basicamente temos dois formatos de dados, ao trabalhar com REST: JSON e XML. Quase sempre que criamos um webservice nós iremos aceitar informações JSON e XML e também retornar JSON e XML. Porém a grande maioria dos webservices utilizam o formato JSON, por este motivo ele tem sido um formato dominante nos últimos tempos.

O legal de trabalhar com REST é que podemos implementar o nosso próprio media type. Podemos trabalhar com formato de texto, yaml ou qualquer outro que possibilite a troca de informações, desde que você informe o formato para as aplicações que irão consumir os dados.

Precisamos entender uma coisa, sobre o REST, que é outra confusão que temos. O REST não mantem os estados, esta característica é conhecida como **stateless**, ou seja, cada requisição é tratada de forma independente, não tendo assim, nenhuma ligação com a requisição anterior. Pelo fato dos dados serem perdidos é que precisamos sempre trabalhar com JWT ou OAuth2, para que desta forma consigamos ter certeza de que o usuário está autenticado e autorizado a fazer as requisições.

No final das contas nós utilizaremos o media-type, os verbos HTTP e disponibilizaremos a API através de recursos. Então definiremos recursos em nossa aplicação para buscar dados, alterar, inserir e remover. Todos os recursos serão utilizandos juntamente com os verbos. Podemos resumir nossa API com REST desta maneira.

Claro que o REST possui várias outras áreas como: cache, paginação, filtro, versionamento e etc. Mas neste conteúdo iremos focar mais nestas características de transferência de dados com a aplicação.

Outra área da arquitetura REST, que é muito interessante, e que as vezes é muito deficitárea, é a parte de **status code** e **erros**. As vezes temos uma API muito boa, que trabalhar com os verbos HTTPs de forma correta, retorna os dados corretos, mas só que quando nós precisamos conversar com a API e entender o erro que ela está retornando, você acaba não conseguindo saber. Isso faz com que você perca muito tempo tentando entender o erro e mesmo assim pode não descobrir, porque você não sabe como a API foi construída.

Imagina que você quer fazer uma autenticação nesta API e ela te devolve um status **200**, que seria um "success", mas na verdade você não logou, então se tratava de um erro. Com isso você tem que verificar que tipo de mensagem está recebendo, muitas vezes é encontrado um **success = false**. Se você quer retornar um sucesso você pode retornar um status 200, mas se quiser retornar um erro você tem a família do status code **500** a família do **400** para informar para sua aplicação que aconteceu um erro.

A API deve trabalhar com os status codes corretos para facilitar a vida de quem estiver utilizando, porque se você tem um erro e recebe um status de sucesso, com certeza você vai ficar com o pé atrás. Além do erro, ou sucesso, é muito importante atrelas mensagens de retorno, para que a pessoa possa entender, da melhor forma possível, o que está acontecendo durantes as requisições.

# Conclusão

Vamos aprender a criar os webservices com REST, mas sempre tendo a conciência que se trata de um conceito importante. Portanto temos que aprender a trabalhar da forma correta, com os status codes corretos, com mensagens explicativas, para que assim sua API seja completa, caso contrário sua API não servirá para nada e ninguém irá querer utilizar, porque nunca entende nada do que está acontecendo. Então vamos ter esta conciência de desenvolver utilizando os melhores padrões possíveis.