# Iniciando com Express.js

Neste módulo iremos ensinar como dar início a projeto utilizando o framework express.js.

Visite o site <http://expressjs.com/> para entender melhor como o express funciona. Primeiramente podemos ver que o framework é muito minimalista que visa um modo fácil e simples de construir uma aplicação.

Como já foi falado, no módulo anterior, o express conta com um gerador que pode executar um projeto inicial para você. Caso queira utilizar basta instalar a ferramente via npm, sequindo o comando informado no site.

`npm install express-generator -g`

Adicionamos o parâmetro **-g** para fazer a instalação de forma global, isso quer dizer que poderemos utilizar o gerador em qualquer local de nosso terminal, não somente na pasta do projeto.

Estamos falando de um framework que visa performance e construir aplicação de forma fácil, tanto APIs quanto web applications. É um dos frameworks mais utilizados do momento.

O projeto é mantido pela StrongLoop/IBM e está em constante atualização.

# Primeiro passo

Iremos criar um novo diretório, chamado express, para que possamos dar início a nossa aplicação.

Iniciaremos um novo projeto com o comando: `npm init`. Como já fizemos nos primeiros módulos deste conteúdo.

Depois de preencher todos os dados e ter gerado o arquivo package.json iremos instalar o express, como dependência do projeto, com o comando abaixo:

`npm install express --save`

Depois de instalado vamos criar um arquivo chamado index.js, que foi o entry point que configuramos na propriedade **main** do arquivo package.json. Vejam o conteúdo do arquivo index.js.

```js
var express = require('express');

var app = express();

app.get('/', function (req,res) {
   res.send('Hello from express SON');
});

app.get('/hello', function (req,res) {
   res.json({
       message: "This is my router hello",
       framework: 'expressjs.com'
   });
});

app.listen(3000, function () {
    console.log('express has been started!');
});
```

Se analisar o código verá que apenas importamos o pacote que instalamos do express e atribuimos uma instância para uma variável chamada **app**.

Depois basta sair criando as rotas que quisermos utilizando o verbo http que quisermos. Em nosso exemplos utilizamos o verbo **get**, passando a rota como primeiro parâmetro e uma função como segundo parâmetro.

A função recebe a requisição e a response como parâmetros.

Na rota principal **http://localhost:3000/**, retornamos uma mensagem no formato **text/plain**. Já na segunda rota ****http://localhost:3000/hello** estamos retornando um json.

Depois basta que criemos o server e passemos a porta que queremos. Depois das rotas criadas e o servidor configurado, basta executarmos o arquivo:

`node index.js`

Acessando a rota **hello** teremos o seguinte resultado:

![node_express_hello](./images/node_express_hello.png "node_express_hello")

Vocês podem ver que o que era muito difícil de fazer, utilizando a classe **http** do node, manualmente, nós fazemos muito facilmente com o express. Isso acontece porque ele já trás tudo abstraído e pronto para utilizar, conforme foi falado no módulo anterior.

Para finalizar o conteúdo podemos mostrar como criar uma rota com parâmetros, o que pode ser muito utilizado.

```js
app.get('/hello/:name', function (req,res) {
   res.send('Welcome ' + req.params.name + '!' );
});
```

Apenas precisamos colocar dois pontos(:) e informar o identificador do parâmetro. Este valor será utilizado para resgatá-lo posteriormente. Reparem que para resgatar o valor informado utilizamos **req.params.name**. Isso significa que se acessarmos **http://localhost/hello/Leonan** teremos o seguinte resultado:

**Welcome Leonan!**

Porque o nome passado na url será resgatado de forma dinâmica pela função.

# Conclusão

Conforme nós informamos no módulo anterior, trabalhar com express é muito fácil e rápido. Com pouco tempo você é capaz de criar algo simples, porém muito sólido.

Sua estrutura de rotas é criada muito rapidamente e de forma muito simples. Você tem suporte a tudo que uma aplicação precisa, desde suporte ao http até suporte a banco de dados e template engine.