# Join

Este conteúdo não é extremamente avançado, porém queremos lhe dar a melhor base possível para que possa trabalhar com o select da melhor forma possível.

Existe um recurso muito bom, chamado **join**, que possibilita trabalhar com select com relacionamento de tabelas. Até agora estamos fazendo consulta em apenas uma tabela, mas com o join é possível trazer dados de uma ou mais tabelas, desde que elas estejam devidamente relacionadas.

O relacionamento deve conter a chave estrangeira de outra tabela, assim como já mostramos em módulos anteriores.

Para exemplificar este comando utilizaremos a tabela de pedidos que nos informa qual produto que foi comprado através do seu id.

Primeiro vamos adicionar um pedido na tabela:

```
insert into pedidos values(1, 1, 2, 200);

select * from pedidos;
```

Vejam que estamos adicionando e já listando todos os pedidos. O resultado que teremos da pesquisa é o seguinte:

| id | produto_id | quantidade | total |
|----|------------|------------|-------|
| 1  | 1          | 2          | 200   |

Percabam que temos um pedido com o produto de id igual a um e quantidade igual a duas unidades, somando um total de cem reais. Com estas informações podemos fazer outra pesquisa para saber de qual produto se trata, sabendo o id do mesmo:

```
select * from produtos where id=1;
```

Nós teríamos acesso ao produto tranquilamente, mas este processo é muito complicado porque eu teria que ficar decorando os ids dos produtos adicionados ao meu pedido, depois teria que fazer outra pesquisa para saber qual produto que é e este processo ficaria muito ruim e cansativo.

Por este motivo existe o comando join. Imagina que ao invés de trazer o id do produto apenas nós queiramos trazer o nome do mesmo. Veja o comando abaixo:

```
select *, nome from predidos, produtos
where pedidos.produto_id = produtos.id;
```

Desta forma teremos o seguinte resultado:

|id |produto_id|quantidade|total|id|nome       |preco|
|---|----------|----------|-----|--|-----------|-----|
| 1 | 1        | 2        | 200 |1 | Produto 1 | 100 |

Maravilha conseguimos ir buscar dados de uma tabela na outra e listar no mesmo resultado, porém estamos com os dados muito poluídos. Não precisamos de todos estes dados então podemos melhorar o nosso resultado selecionando os campos que desejamos.

```
select pedidos.id, nome, quantidade, preco as 'Valor unitário', total 
from predidos, produtos
where pedidos.produto_id = produtos.id;
```

|id |nome       |quantidade|Valor unitário|total|
|---|-----------|----------|--------------|-----|
| 1 | Produto 1 | 2        | 100          | 200 |

Vejam que agora estamos formatando o resultado da maneira que queremos, porém o resultado foi o mesmo, apenas eliminamos informações desnecessárias.

O comando join consistem em passarmos mais do que uma tabela como parâmetro de pesquisa, desde que as tabelas estejam relacionadas em sua estrutura.

**from predidos, produtos**

Atente-se, quando estamos trabalhando com relacionamento e temos colunas com o mesmo nome, devemos informar o nome da tabela seguido de ponto final e depois o nome da coluna. Veja exemplo abaixo:

**where pedidos.produto_id = produtos.id;**

Como dissemos anteriormente este curso não é avançado, porém você pôde perceber o poder que o SQL tem para fazer buscas em bancos de dados. Apesar de ser uma linguagem simples ela nos da o poder de manipulação de dados.