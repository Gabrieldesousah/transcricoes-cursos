# Automatização migrações e seeders

No módulo anterior nós conseguimos fazer a integração do Faker com o Phinx. Isso nos deu um grande poder na hora de criar dados de teste em nossa aplicação.

Mas vimos que se quisermos limpar os dados da tabela e criá-los novamente teremos que executar um **rollback**, depois um **migrate** e depois um **seed:run**. Imagina toda hora ter que executar estes três comandos para limpar e adicionar os dados de testes novamente.

O nosso objetivo é tornar a sua vida sempre mais simples e automatizada. Para isso vamos criar um arquivo, em PHP, que executará estes três comandos pra gente. Desta forma nós executaremos um arquivo e ele já fará todo o processo.

Crie um arquivo chamado **migrate.seed.php** e adicione o conteúdo abaixo:

```php
exec(__DIR__ . '/vendor/bin/phinx rollback -t=0');
exec(__DIR__ . '/vendor/bin/phinx migrate');
exec(__DIR__ . '/vendor/bin/phinx seed:run');
```

Este arquivo executa os mesmos comando que nós rodaríamos no terminal.

Então basta executar este arquivo agora e teremos o mesmo resultado.

`php migrate-seed.php`

Depois de rodar o script, caso não tenha nenhuma erro, você pode verificar sua base de dados e verá que os dados foram apagados e gerados novamente com sucesso.

| id | name                                     | created_at          | updated_at          |
+----+------------------------------------------+---------------------+---------------------+
|  1 | Sra. Mia Maia                            | 2017-03-29 19:45:33 | 2017-03-29 19:45:33 |
|  2 | Renata Ferraz Colaço                     | 2017-03-29 19:45:33 | 2017-03-29 19:45:33 |
|  3 | Sr. Sérgio Paulo Cruz                    | 2017-03-29 19:45:33 | 2017-03-29 19:45:33 |
|  4 | Dr. Ricardo Assunção Santiago Sobrinho   | 2017-03-29 19:45:33 | 2017-03-29 19:45:33 |
|  5 | Sr. Hernani Serna Jr.                    | 2017-03-29 19:45:33 | 2017-03-29 19:45:33 |
|  6 | Dr. Jorge da Silva Neto                  | 2017-03-29 19:45:33 | 2017-03-29 19:45:33 |
|  7 | Dr. Horácio Rosa Pacheco Neto            | 2017-03-29 19:45:33 | 2017-03-29 19:45:33 |
|  8 | Sr. Rafael Adriano Ramires               | 2017-03-29 19:45:33 | 2017-03-29 19:45:33 |
|  9 | Mel Velasques Fidalgo Jr.                | 2017-03-29 19:45:33 | 2017-03-29 19:45:33 |
| 10 | Fábio Bittencourt Sandoval Jr.           | 2017-03-29 19:45:33 | 2017-03-29 19:45:33 |

Com este módulo nós chegamos a conclusão que não devemos sofrer para desenvolver nenhuma aplicação. As linguagens de programação foram feitas exatamente para isso, então use-as ao seu favor.

Automatize seus projetos, crie scripts, você pode perder tempo hoje, mas, no futuro, você ganhará tempo ao criar suas outras aplicações.

Tente ser o mais prático possível e simplificar os processos sempre que possível também. Você acaba ganhando tempo e tornando seu desenvolvimento mais empolgante. O desenvolvimento de projetos devem ser o mais gratificante possível, para que tenha qualidade no resultado final. No momento em que você começa a achar o seu projeto chato, é o momento de parar e arrumar uma meneira de melhorar, caso contrário, seu projeto não será o melhor possível.

O próximo passo será entender alguns conceitos em torno do Composer, PSRs e o PHP-FIG para podermos dar continuidade ao desenvolvimento do projeto.